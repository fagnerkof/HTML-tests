<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Financial Dashboard – Mobile</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --bg:#f6f7f9;
  --card:#ffffff;
  --sheet:#ffffff;
  --text:#1f2937;
  --muted:#6b7280;
  --accent:#198754;
  --border:#e5e7eb;
  --button:#f3f4f6;
}

body.dark {
  --bg:#0f172a;
  --card:#1e293b;
  --sheet:#1e293b;
  --text:#f9fafb;
  --muted:#9ca3af;
  --accent:#22c55e;
  --border:#334155;
  --button:#334155;
}

body {
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,sans-serif;
}

.app {
  max-width:420px;
  margin:auto;
  min-height:100vh;
}

.topbar {
  background:var(--accent);
  color:#fff;
  padding:12px 16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.card {
  background:var(--card);
  border-radius:16px;
  border:1px solid var(--border);
}

/* ===== TITLES ===== */
.section-title {
  color:var(--text);
  font-weight:600;
  font-size:0.95rem;
}

/* ===== METRICS ===== */
.metric-main {
  font-size:1.9rem;
  font-weight:700;
  letter-spacing:-0.02em;
  color:var(--text);
}

.metric-value-secondary {
  font-weight:600;
  color:var(--text);
}

.metric-sub {
  font-size:.85rem;
  color:var(--muted);
}

/* ===== SHEET ===== */
.sheet {
  background:var(--sheet);
  overflow:hidden;
  transition:max-height .45s ease;
  max-height:220px;
}

.sheet.collapsed { max-height:150px; }
.sheet.expanded { max-height:520px; }

.table {
  color:var(--text);
}

.table thead {
  background:rgba(0,0,0,.05);
}

body.dark .table thead {
  background:rgba(255,255,255,.08);
}

.table td,.table th {
  border-color:var(--border);
}

/* ===== SHEET DARK MODE ===== */
body.dark .sheet {
  background: var(--sheet);
}

body.dark .sheet .table {
  color: var(--text);
}

body.dark .sheet .table tbody tr {
  background-color: transparent;
}

body.dark .sheet .table td,
body.dark .sheet .table th {
  background-color: var(--sheet);
  color: var(--text);
}

/* ===== BUTTONS & DROPDOWNS ===== */
.theme-btn {
  background:var(--button);
  color:var(--text);
  border:1px solid var(--border);
}

.dropdown-menu {
  background:var(--card);
  border:1px solid var(--border);
}

.dropdown-item {
  color:var(--text);
}

.dropdown-item:hover {
  background:rgba(255,255,255,.08);
}

/* ===== SELECT ===== */
.form-select {
  background:var(--card);
  color:var(--text);
  border-color:var(--border);
}

.form-select option {
  background:var(--card);
  color:var(--text);
}

.see-more {
  cursor:pointer;
  color:var(--accent);
  font-weight:500;
}
</style>
</head>

<body>
<div class="app">

<!-- HEADER -->
<div class="topbar">
  <i class="bi bi-list fs-4"></i>
  <strong>Pixelated Dashboard</strong>

  <div class="dropdown">
    <button class="btn btn-sm theme-btn dropdown-toggle" data-bs-toggle="dropdown">
      DSM
    </button>
    <ul class="dropdown-menu dropdown-menu-end">
      <li><a class="dropdown-item" href="#">Overview</a></li>
      <li><a class="dropdown-item" href="#">Reports</a></li>
      <li><a class="dropdown-item" href="#">Export CSV</a></li>
    </ul>
  </div>
</div>

<!-- TABS -->
<div class="d-flex justify-content-between align-items-center px-3 mt-3">
  <ul class="nav nav-pills">
    <li class="nav-item"><button class="nav-link active">Sales</button></li>
    <li class="nav-item"><button class="nav-link">Expenses</button></li>
  </ul>

  <div class="dropdown">
    <button class="btn btn-sm theme-btn" data-bs-toggle="dropdown">
      <i class="bi bi-three-dots-vertical"></i>
    </button>
    <ul class="dropdown-menu dropdown-menu-end">
      <li><a class="dropdown-item" href="#">Refresh</a></li>
      <li><a class="dropdown-item" href="#">Download</a></li>
      <li><hr class="dropdown-divider"></li>
      <li><button class="dropdown-item" onclick="toggleDark()">Toggle Dark Mode</button></li>
    </ul>
  </div>
</div>

<!-- METRICS -->
<div class="px-3 mt-3">
  <div class="card p-3">
    <div class="d-flex justify-content-between">
      <div>
        <div class="metric-sub">This Week</div>
        <div class="metric-main" id="totalValue">$2,400,000</div>
        <div class="text-success small">▲ 20% vs last week</div>
      </div>
      <div class="text-end">
        <div class="metric-sub">COGS</div>
        <div class="metric-value-secondary" id="cogs">$240,000</div>
        <div class="metric-sub mt-2">Gross Profit</div>
        <div class="metric-value-secondary" id="profit">$2,160,000</div>
      </div>
    </div>

    <select class="form-select form-select-sm w-50 mt-3" onchange="changeCurrency(this.value)">
      <option value="USD">USD</option>
      <option value="BRL">BRL</option>
    </select>
  </div>
</div>

<!-- ITEM SALES -->
<div class="px-3 mt-4">
  <div class="card p-3">
    <div class="section-title">Item Sales</div>

    <div id="itemSheet" class="sheet collapsed mt-2">
      <table class="table table-sm mb-0">
        <thead>
          <tr><th>Item</th><th>Amount</th><th>Qty</th></tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>

    <div class="see-more mt-2" id="seeMoreBtn" onclick="toggleTable()">See more</div>
  </div>
</div>

<!-- CHART -->
<div class="px-3 mt-4 mb-4">
  <div class="card p-3">
    <div class="section-title mb-2">This Week Trend</div>

    <div class="btn-group mb-2">
      <button class="btn btn-outline-secondary btn-sm" onclick="setChart('line')">Line</button>
      <button class="btn btn-outline-secondary btn-sm" onclick="setChart('bar')">Bar</button>
      <button class="btn btn-outline-secondary btn-sm" onclick="setChart('pie')">Pie</button>
    </div>

    <canvas id="chart" height="180"></canvas>
  </div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
const FX_RATE=5;
let currency='USD';
let expanded=false;
let chart;

const items=[
  {name:'Watch',amount:180000,qty:10},
  {name:'Fast Charger',amount:240000,qty:20},
  {name:'T-Shirt',amount:500000,qty:100},
  {name:'Notebook (Deluxe)',amount:250000,qty:50},
  {name:'BIC Pen',amount:350000,qty:200}
];

function formatMoney(v){
  const f=currency==='BRL'?FX_RATE:1;
  const s=currency==='BRL'?'R$':'$';
  return s+(v*f).toLocaleString();
}

function renderTable(){
  tableBody.innerHTML='';
  (expanded?items:items.slice(0,3)).forEach(i=>{
    tableBody.innerHTML+=`<tr><td>${i.name}</td><td>${formatMoney(i.amount)}</td><td>${i.qty}</td></tr>`;
  });
  seeMoreBtn.innerText=expanded?'See less':'See more';
}

function toggleTable(){
  expanded=!expanded;
  itemSheet.classList.toggle('expanded',expanded);
  itemSheet.classList.toggle('collapsed',!expanded);
  renderTable();
}

function changeCurrency(c){
  currency=c;
  const f=c==='BRL'?FX_RATE:1;
  const s=c==='BRL'?'R$':'$';
  totalValue.innerText=s+(2400000*f).toLocaleString();
  cogs.innerText=s+(240000*f).toLocaleString();
  profit.innerText=s+(2160000*f).toLocaleString();
  renderTable();
}

function toggleDark(){
  document.body.classList.toggle('dark');
}

function initChart(type='line'){
  if(chart) chart.destroy();
  chart=new Chart(chartCanvas,{
    type,
    data:{
      labels:['Mon','Tue','Wed','Thu','Fri','Sat'],
      datasets:[{
        data:[200,400,800,700,1200,1800],
        backgroundColor:'#22c55e'
      }]
    }
  });
}

function setChart(type){
  initChart(type);
}

renderTable();
const chartCanvas=document.getElementById('chart');
initChart();
</script>
</body>
</html>
